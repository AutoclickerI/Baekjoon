(w,*_),*y=open(0)
d=w in'UD'
print(*['015??2??8?'[int(e)]for*l,_ in y[::-d|1]for e in l[::d*4-2]])